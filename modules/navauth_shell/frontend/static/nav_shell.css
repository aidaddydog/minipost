/* nav_shell.css (clean, arbitration-free) */
/* 壳层组件样式（无 :root；主题变量来自 _themes/<theme>/root.css） */
html, body { height: 100%; }
body.nav-shell {
  margin: 0;
  background: var(--page-bg, #ffffff);
  color: var(--text, #0f172a);
  font-family: var(--font-family, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif);
  font-size: var(--font-size-base, 14px);
  line-height: var(--line-height-base, 1.6);
}

/* 布局 */
.shell { max-width: var(--maxw, 100%); margin: 0 auto; padding: var(--page-pt, 20px) var(--page-px, 50px) var(--page-pb, 2px); }
.header, .subrow, .tabrow { background: var(--page-bg, #fff); }
.header { display: flex; align-items: center; margin: var(--header-mt, 0) 0 var(--header-mb, 0); }
.logo {
  display: block; width: var(--logo-w, 30px); height: var(--logo-h, 30px);
  border-radius: var(--logo-radius, 12px); background: var(--logo-bg, #e7e7e9);
  box-shadow: 0 1px 2px rgba(0,0,0,.12); flex: 0 0 auto; text-decoration: none; margin-left: var(--logo-ml, 15px);
}
.header-gap-left { width: var(--gap, 25px); }
.header-gap-right { width: var(--gap, 25px); }
.avatar {
  width: var(--avatar-size, 30px); height: var(--avatar-size, 30px); border-radius: var(--avatar-radius, 50%);
  background: var(--avatar-bg, #ffffff); border: var(--avatar-border-width,1px) solid var(--avatar-border-color,#e7e7e9);
  box-shadow: 0 1px 2px rgba(0,0,0,.06); margin-right: var(--avatar-mr, 15px);
}

/* 一级导航胶囊轨道 */
.nav-rail{ flex: 1 1 auto; display: block; position: relative; }
.track{
  position: relative; display: flex; align-items: center;
  height: var(--l1-height, 35px);
  background: var(--rail-bg, #fff);
  border: 1px solid var(--rail-border, rgba(0,0,0,.08));
  border-radius: var(--rail-radius, 999px);
  padding: 0 var(--rail-px, 6px);
  gap: var(--l1-gap, 6px);
  overflow-x: auto; scrollbar-width: none;
}
.track::-webkit-scrollbar{ display: none; }

.pill{
  position: absolute; top: 50%; left: 0;
  height: var(--pill-h, 27px); min-width: var(--pill-minw, 60px);
  background: var(--pill-bg, #ffffff);
  border: var(--pill-border-width, 1px) solid var(--pill-border-color, rgba(0,0,0,.10));
  box-shadow: var(--pill-shadow, 0 1px 2px rgba(0,0,0,.06));
  border-radius: var(--pill-radius, 999px);
  transform: translate(0, -50%);
  transition:
    transform var(--anim-speed, .25s) var(--anim-ease, cubic-bezier(.22,.61,.36,1)),
    width     var(--anim-speed, .25s) var(--anim-ease, cubic-bezier(.22,.61,.36,1)),
    opacity .18s ease;
  opacity: 0; pointer-events: none; z-index: 0;
}

.link{
  position: relative; z-index: 1;
  padding: 0 var(--l1-item-px, 16px); height: var(--l1-height, 35px);
  display: flex; align-items: center; justify-content: center;
  font-size: var(--l1-font-size, 12px);
  color: var(--l1-color, #151515); text-decoration: none; white-space: nowrap; border-radius: 10px; user-select: none;
}
.link:hover{ color: var(--l1-hover, #0f172a); }
.link.active{ color: var(--l1-active, #111827); font-weight: 600; }

/* 二级整行 */
.subrow{ position: relative; width: 100%; background: transparent; margin-top: var(--sub-top-gap, 0); }
.subrow-inner{ display: flex; align-items: center; min-height: var(--sub-h, 36px); border-bottom: 1px solid var(--sub-border-color, rgba(0,0,0,.06)); }
.subbar-offset{ width: var(--sub-offset, 40px); flex: 0 0 auto; }
.sub-inner{ flex: 1 1 auto; display: flex; align-items: center; gap: var(--sub-gap, 14px); padding: var(--sub-py, 8px) var(--sub-px, 8px); }
a.sub{ text-decoration: none; color: var(--sub-color, #374151); padding: 6px 10px; border-radius: 8px; }
a.sub:hover{ color: var(--sub-hover, #111827); background: var(--sub-hover-bg, rgba(0,0,0,.04)); }
a.sub.active{ color: var(--sub-active, #111827); font-weight: 600; background: var(--sub-active-bg, rgba(0,0,0,.06)); }

/* 三级：页签 + Ink + 卡片 */
.tabrow{ background: var(--page-bg, #fff); }
.tabrow-inner{ display: flex; align-items: center; }
.tab-offset{ width: var(--tab-offset, 40px); flex: 0 0 auto; }
.tab-wrap{ flex: 1 1 auto; display: block; }
.tabs{ position: relative; z-index: 2; display: flex; align-items: center; gap: var(--tab-gap, 8px); padding: var(--tabs-py, 10px) var(--tabs-px, 8px); min-height: var(--tab-height, 38px); }
.tab{ display: inline-flex; align-items: center; justify-content: center; height: var(--tab-height, 38px); text-decoration: none; color: var(--tab-color, #374151); border-radius: 8px; padding: 0 12px; }
.tab:hover{ color: var(--tab-hover, #111827); background: var(--tab-hover-bg, rgba(0,0,0,.04)); }
.tab.active{ color: var(--tab-active, #111827); font-weight: 600; background: var(--tab-active-bg, rgba(0,0,0,.06)); }
.tab__text{ display: inline-block; margin-left: var(--tab-text-ml, 37px); }

.tab-ink{
  position: absolute; left: 0; top: calc(100% + var(--tab-ink-mt, -1px));
  height: var(--tab-ink-height, 2px); width: 0;
  background: var(--tab-ink-color, #000); border-radius: var(--tab-ink-radius, 999px);
  transform: translateX(0);
  transition:
    transform var(--anim-speed, .25s) var(--anim-ease, cubic-bezier(.22,.61,.36,1)),
    width     var(--anim-speed, .25s) var(--anim-ease, cubic-bezier(.22,.61,.36,1));
  z-index: 4; pointer-events: none; opacity: 1;
}

.tabcard{ background: var(--tabcard-bg, #f6f6f6); border: 1px solid var(--tabcard-border, rgba(0,0,0,.08)); border-radius: var(--tabcard-radius, 16px); padding: var(--tabcard-p, 16px); position: relative; z-index: 1; margin-top: -1px; }
.tabcard.no-tabs{ margin-top: 0; }
.tabpanel{ min-height: 80px; }
.tabpanel iframe{ width: 100%; display: block; border: 0; background: transparent; }

/* 响应式 */
@media (max-width: 980px){
  .track{ overflow: auto hidden; scroll-snap-type: x mandatory; }
  .link{ scroll-snap-align: center; }
}
@media (max-width: 600px){
  .nav-rail{ flex: 1 1 auto; width: auto; }
  .subbar-offset{ width: 0; }
  .tab-offset{ width: 0; }
  .tab-wrap{ flex: 1 1 auto; width: auto; }
}
